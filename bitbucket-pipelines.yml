image: python:3.7

pipelines:
  default:
    - step:
        name: pytest
        image: python:3.7
        script:
          - pip install poetry
          - poetry install
          # Treat warnings as errors
          - poetry run pytest -Werror
        caches:
          - pip
          - poetry
definitions:
  caches:
    poetry: ~/.cache/pypoetry/cache
